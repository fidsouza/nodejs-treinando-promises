function cov_k4i7ng93x(){var path="/home/filipe/\xC1rea de Trabalho/meus projetos/projetosPessoais/nodejs-promises/src/request.js";var hash="f9e6c3e909f4dff7a28f94bc47555faac6aae535";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/filipe/\xC1rea de Trabalho/meus projetos/projetosPessoais/nodejs-promises/src/request.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:30}},"1":{start:{line:5,column:19},end:{line:6,column:58}},"2":{start:{line:5,column:43},end:{line:6,column:58}},"3":{start:{line:6,column:8},end:{line:6,column:58}},"4":{start:{line:9,column:8},end:{line:11,column:10}},"5":{start:{line:10,column:12},end:{line:10,column:63}},"6":{start:{line:15,column:8},end:{line:24,column:10}},"7":{start:{line:16,column:12},end:{line:23,column:14}},"8":{start:{line:17,column:30},end:{line:17,column:32}},"9":{start:{line:18,column:16},end:{line:22,column:35}},"10":{start:{line:18,column:39},end:{line:18,column:55}},"11":{start:{line:20,column:20},end:{line:20,column:55}},"12":{start:{line:27,column:8},end:{line:30,column:10}},"13":{start:{line:34,column:0},end:{line:34,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:19},end:{line:5,column:20}},loc:{start:{line:5,column:43},end:{line:6,column:58}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:5,column:43},end:{line:5,column:44}},loc:{start:{line:6,column:8},end:{line:6,column:58}},line:6},"2":{name:"(anonymous_2)",decl:{start:{line:8,column:4},end:{line:8,column:5}},loc:{start:{line:8,column:35},end:{line:12,column:5}},line:8},"3":{name:"(anonymous_3)",decl:{start:{line:9,column:27},end:{line:9,column:28}},loc:{start:{line:10,column:12},end:{line:10,column:63}},line:10},"4":{name:"(anonymous_4)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:19},end:{line:25,column:5}},line:14},"5":{name:"(anonymous_5)",decl:{start:{line:15,column:27},end:{line:15,column:28}},loc:{start:{line:15,column:47},end:{line:24,column:9}},line:15},"6":{name:"(anonymous_6)",decl:{start:{line:16,column:27},end:{line:16,column:28}},loc:{start:{line:16,column:34},end:{line:23,column:13}},line:16},"7":{name:"(anonymous_7)",decl:{start:{line:18,column:31},end:{line:18,column:32}},loc:{start:{line:18,column:39},end:{line:18,column:55}},line:18},"8":{name:"(anonymous_8)",decl:{start:{line:19,column:27},end:{line:19,column:28}},loc:{start:{line:19,column:33},end:{line:21,column:17}},line:19},"9":{name:"(anonymous_9)",decl:{start:{line:26,column:4},end:{line:26,column:5}},loc:{start:{line:26,column:48},end:{line:32,column:5}},line:26}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f9e6c3e909f4dff7a28f94bc47555faac6aae535"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_k4i7ng93x=function(){return actualCoverage;};}return actualCoverage;}cov_k4i7ng93x();const https=(cov_k4i7ng93x().s[0]++,require('https'));class Request{errorTimeout=(cov_k4i7ng93x().s[1]++,(reject,urlRequest)=>{cov_k4i7ng93x().f[0]++;cov_k4i7ng93x().s[2]++;return()=>{cov_k4i7ng93x().f[1]++;cov_k4i7ng93x().s[3]++;return reject(new Error(`timeout at [${urlRequest}] :(`));};});raceTimeoutDelay(url,timeout){cov_k4i7ng93x().f[2]++;cov_k4i7ng93x().s[4]++;return new Promise((resolve,reject)=>{cov_k4i7ng93x().f[3]++;cov_k4i7ng93x().s[5]++;return setTimeout(this.errorTimeout(reject,url),timeout);});}async get(url){cov_k4i7ng93x().f[4]++;cov_k4i7ng93x().s[6]++;return new Promise((resolve,reject)=>{cov_k4i7ng93x().f[5]++;cov_k4i7ng93x().s[7]++;https.get(url,res=>{cov_k4i7ng93x().f[6]++;const items=(cov_k4i7ng93x().s[8]++,[]);cov_k4i7ng93x().s[9]++;res.on('data',data=>{cov_k4i7ng93x().f[7]++;cov_k4i7ng93x().s[10]++;return items.push(data);}).on("end",()=>{cov_k4i7ng93x().f[8]++;cov_k4i7ng93x().s[11]++;resolve(JSON.parse(items.join("")));}).on("error",reject);});});}async makeRequest({url,method,timeout}){cov_k4i7ng93x().f[9]++;cov_k4i7ng93x().s[12]++;return Promise.race([this[method](url),this.raceTimeoutDelay(url,timeout)]);}}cov_k4i7ng93x().s[13]++;module.exports=Request;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVlc3QuanMiXSwibmFtZXMiOlsiaHR0cHMiLCJyZXF1aXJlIiwiUmVxdWVzdCIsImVycm9yVGltZW91dCIsInJlamVjdCIsInVybFJlcXVlc3QiLCJFcnJvciIsInJhY2VUaW1lb3V0RGVsYXkiLCJ1cmwiLCJ0aW1lb3V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZ2V0IiwicmVzIiwiaXRlbXMiLCJvbiIsImRhdGEiLCJwdXNoIiwiSlNPTiIsInBhcnNlIiwiam9pbiIsIm1ha2VSZXF1ZXN0IiwibWV0aG9kIiwicmFjZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI4K0ZBZVk7eUZBZlosS0FBTUEsQ0FBQUEsS0FBSyx5QkFBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBVixDQUFYLENBRUEsS0FBTUMsQ0FBQUEsT0FBUSxDQUVWQyxZQUFZLHlCQUFHLENBQUNDLE1BQUQsQ0FBU0MsVUFBVCxHQUF3Qix5REFDbkMscURBQUFELENBQUFBLE1BQU0sQ0FBQyxHQUFJRSxDQUFBQSxLQUFKLENBQVcsZUFBY0QsVUFBVyxNQUFwQyxDQUFELENBQU4sQ0FBa0QsQ0FEZixDQUNlLENBRDFDLEVBR1pFLGdCQUFnQixDQUFDQyxHQUFELENBQU1DLE9BQU4sQ0FBZSwrQ0FDM0IsTUFBTyxJQUFJQyxDQUFBQSxPQUFKLENBQVksQ0FBQ0MsT0FBRCxDQUFVUCxNQUFWLEdBQ2YscURBQUFRLENBQUFBLFVBQVUsQ0FBQyxLQUFLVCxZQUFMLENBQWtCQyxNQUFsQixDQUEwQkksR0FBMUIsQ0FBRCxDQUFpQ0MsT0FBakMsQ0FBVixDQUFtRCxDQURoRCxDQUFQLENBR0gsQ0FFUSxLQUFISSxDQUFBQSxHQUFHLENBQUNMLEdBQUQsQ0FBTSwrQ0FDWCxNQUFPLElBQUlFLENBQUFBLE9BQUosQ0FBWSxDQUFDQyxPQUFELENBQVNQLE1BQVQsR0FBb0IsK0NBQ25DSixLQUFLLENBQUNhLEdBQU4sQ0FBVUwsR0FBVixDQUFlTSxHQUFHLEVBQUksd0JBQ2xCLEtBQU1DLENBQUFBLEtBQUsseUJBQUcsRUFBSCxDQUFYLENBRGtCLHVCQUVsQkQsR0FBRyxDQUFDRSxFQUFKLENBQU8sTUFBUCxDQUFlQyxJQUFJLEVBQUksc0RBQUFGLENBQUFBLEtBQUssQ0FBQ0csSUFBTixDQUFXRCxJQUFYLEVBQWdCLENBQXZDLEVBQ0NELEVBREQsQ0FDSSxLQURKLENBQ1csSUFBTSxnREFDYkwsT0FBTyxDQUFDUSxJQUFJLENBQUNDLEtBQUwsQ0FBV0wsS0FBSyxDQUFDTSxJQUFOLENBQVcsRUFBWCxDQUFYLENBQUQsQ0FBUCxDQUNILENBSEQsRUFJQ0wsRUFKRCxDQUlJLE9BSkosQ0FJWVosTUFKWixFQUtILENBUEQsRUFRSCxDQVRNLENBQVAsQ0FVSCxDQUNnQixLQUFYa0IsQ0FBQUEsV0FBVyxDQUFDLENBQUVkLEdBQUYsQ0FBT2UsTUFBUCxDQUFlZCxPQUFmLENBQUQsQ0FBMkIsZ0RBQ3hDLE1BQU9DLENBQUFBLE9BQU8sQ0FBQ2MsSUFBUixDQUFhLENBQ2hCLEtBQUtELE1BQUwsRUFBYWYsR0FBYixDQURnQixDQUVoQixLQUFLRCxnQkFBTCxDQUFzQkMsR0FBdEIsQ0FBMkJDLE9BQTNCLENBRmdCLENBQWIsQ0FBUCxDQUtILENBN0JTLEMsd0JBK0JkZ0IsTUFBTSxDQUFDQyxPQUFQLENBQWlCeEIsT0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBodHRwcyA9IHJlcXVpcmUoJ2h0dHBzJyk7XG5cbmNsYXNzIFJlcXVlc3Qge1xuXG4gICAgZXJyb3JUaW1lb3V0ID0gKHJlamVjdCwgdXJsUmVxdWVzdCkgPT4gKCkgPT5cbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgdGltZW91dCBhdCBbJHt1cmxSZXF1ZXN0fV0gOihgKSk7XG5cbiAgICByYWNlVGltZW91dERlbGF5KHVybCwgdGltZW91dCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5lcnJvclRpbWVvdXQocmVqZWN0LCB1cmwpLCB0aW1lb3V0KSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXQodXJsKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpID0+IHtcbiAgICAgICAgICAgIGh0dHBzLmdldCh1cmwsIHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBbXVxuICAgICAgICAgICAgICAgIHJlcy5vbignZGF0YScsIGRhdGEgPT4gaXRlbXMucHVzaChkYXRhKSlcbiAgICAgICAgICAgICAgICAub24oXCJlbmRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UoaXRlbXMuam9pbihcIlwiKSkpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oXCJlcnJvclwiLHJlamVjdClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGFzeW5jIG1ha2VSZXF1ZXN0KHsgdXJsLCBtZXRob2QsIHRpbWVvdXQgfSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgIHRoaXNbbWV0aG9kXSh1cmwpLFxuICAgICAgICAgICAgdGhpcy5yYWNlVGltZW91dERlbGF5KHVybCwgdGltZW91dClcbiAgICAgICAgXSlcblxuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gUmVxdWVzdCJdfQ==